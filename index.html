<!DOCTYPE html>
<html>
  <head>
    <script src="js/socket.io-1.2.1.js"></script>
    <script src="js/jquery.min.js"></script>
    <script src="bootstrap/dist/js/bootstrap.min.js"></script>
    <!-- script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyCXGYrhU1bkONC6gli3F9vLVwMTrTNnx-I"></script -->
    <script src="js/js?key=AIzaSyCXGYrhU1bkONC6gli3F9vLVwMTrTNnx-I"></script>
    <script src="js/geolocation.js"></script>
    <script src="js/client.js"></script>
    <script src="js/config.js"></script>
    <script src="js/mapa.js"></script>    
    
    <script src="login/login.js"></script>    
    
    <link rel="stylesheet" type="text/css" href="bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="login/login.css">

<style>
body, html {
    height: 100%;
}

#map_wrapper, #map_canvas {
    height: 100%;
}
</style>

    
    
     <title>DondeEstas</title>
  </head>
  <body onLoad="init()">
  
<div id="usuario">
	<!--
    <span>Nombre : </span><input id="nombre"/>
	<input type="button" onclick="enviar()" value="Enviar" />
    -->
<script src="js/TweenLite.min.js"></script>
<!-- This is a very simple parallax effect achieved by simple CSS 3 multiple backgrounds, made by http://twitter.com/msurguy -->

<div class="container">
    <div class="row vertical-offset-100">
    	<div class="col-md-4 col-md-offset-4">
    		<div class="panel panel-default">
			  	<div class="panel-heading">
			    	<h3 class="panel-title">DondeEstas v2</h3>
			 	</div>
			  	<div class="panel-body">
			    	<form accept-charset="UTF-8" role="form">
                    <fieldset>
			    	  	<div class="form-group">
			    		    <input class="form-control" placeholder="Nombre de Usuario" name="nombre" id="nombre" type="text">
			    		</div>
			    		<!--div class="form-group">
			    			<input class="form-control" placeholder="Password" name="password" type="password" value="">
			    		</div-->
			    		<div class="checkbox">
			    	    	<label>
			    	    		<input name="remember" type="checkbox" value="Remember Me"> Recordar
			    	    	</label>
			    	    </div>
			    		<input class="btn btn-lg btn-success btn-block" type="button" value="Login" onClick="enviar()">
			    	</fieldset>
			      	</form>
			    </div>
			</div>
		</div>
	</div>
</div>
    
    
</div>  
  
  
  <div id="console" style="display:none">
	  <div id="top">Intentando conectar websocket... Por ahora nada... :)</div>
	  <div id="mid">Tiempo loop: <span id="ping"></span></div>
	  <div id="clientes"></div>
  </div>
  
  
    <div id="map_wrapper">
        <div id="map_canvas" class="mapping"></div>
    </div>
 
  
  
    <script>
    
		var mapa = new Mapa();
		var client = new Client();
		var geo = new Geo();
    	function enviar(){
    		var nombre = document.getElementById('nombre').value;
    		var div_usuario = document.getElementById('usuario');
    		var div_console = document.getElementById('console');
			var div_map_wrapper = document.getElementById('map_wrapper');
			
    		div_usuario.style.display = 'none';
    		// div_console.style.display = '';
			div_map_wrapper.style.display = '';
    		
    		/* inicio */
    		
    		client.setName( nombre );
    		client.connect();
			
    	}
		
		/* todo assinc */
		function init(){
			initLocation();
		}
		function initLocation(){
			geo.getLocation( returnLocation );
		}
		function returnLocation( position ){
			mapa.loadApi( position.coords.latitude , position.coords.longitude , 'initMapa' );
		}
		function initMapa(){ // llamada por la Api
			mapa.init();
		}
		/* todo assinc */				
		
    /*	
      window.onload = function() {
        var client = new Client();
      };
     */ 
    </script>
  </body>
</html>